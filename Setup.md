# Setup Your DevicesðŸ“±

<p align=center>
    Setup is essential for Mobile Pen-testing, the tutorial below will be done in Windows OS. ðŸ˜„
</p>
<br></br>

## Emulator
There are many Emulator you can choose, from Nox Player, Genymotion, ldplayer or even using the Android Studio Virtual Devices (AVD). For me Personally I use Genymotion, but of course, you can choose any of them that you see fit for you.
<br>
<br>

## adb
Android Debug Bridge (adb) is an essential for Mobile Pentesting, as this tool helps you to interact via your terminal with the Android Virtual Devices / your Emulator.

If you already installed an Emulator, it will usually already have the adb in the `tools` directory, but in case you haven't you can follow the installation below.

### **Instalation**

**If you don't have Android Studio Installed** follow the installation guide below.
1. Go to https://developer.android.com/studio/command-line/adb or Download it [here](https://dl.google.com/android/repository/platform-tools-latest-windows.zip)
2. Unzip the Content and move it to `C:/`
3. Go inside the Directory and copy the PATH (`C:\platform-tools_r34.0.0-windows\platform-tools` for me).
4. Edit your devices Environment variables and then add the PATH that you've coppied using `new`
5. Open CMD and see if `adb` is installed by entering `adb -h`
<br>
<br>

**With Android Studio Already Installed** Follow this guide:
1. Go to your `C:\User\<User-name>\AppData\Local\Android\Sdk\platform-tools`
2. Copy the path and add it to your PATH Variable.

:warning: If the `AppData` doesn't show up, you need to eanble `show hidden folder` in your File explorer.
<br>
<br>

## apktools

:warning: **Make sure you have Java with minimum version of 1.8 Installed**

As its name said, this is the essential tools to build, decompile, and sign your apps later, you can try to install it by following their guide here https://ibotpeaches.github.io/Apktool/install/.
<br>
<br>

## zipalign
Zipalign is installed along with the `Sdk`, the path should look like this 
```
C:\Users\<User-name>\AppData\Local\Android\Sdk\Build-tools\<version>
```
So you just need to add it to your PATH Variable. If somehow you don't have the `Build-tools` folder, you can install it manually with the link below to get the executable.

https://forum.xda-developers.com/t/tool-windows-batch-apk-zipalign-tool-v-2-0-23-05-2022.3791644/.
<br>
<br>

## Keytool
Keytool is also an essential part for doing Mobile-Pentest, the app that we modified need to be signed in order to be able to install it in our virtual devices. Keytool create a key for you to sign the app.

### **Instalaion**
1. Download JDK here https://www.oracle.com/java/technologies/downloads/
2. Once you download and installed it, the default folder is `C:\Program Files\Java\`
3. Navigate to the folder and copy the PATH Variable, here is an eample:
`C:\Program Files\Java\jdk-15.0.2\bin` , make sure to copy it until the `\bin` to be able to use the tools below.
4.  Don't forget to use a new terminal after you add the PATH Variable
<br>
<br>

## JADX
JADX is a tool that visualize a source code from Android DEX or .apk file, it helps you to analyse how that application works.

### **Instalation**
1. Download It from [here](https://sourceforge.net/projects/jadx.mirror/)
2. Unzip it and move the .exe file to your work folder.
<br>
<br>

## Burp Suite
We are going to use Burp Suite the same way we used it in Linux, the only difference is, you are going to use it to catch Request in your Emulator. For this tutorial, I'm going to use Genymotion, the other emulator setup might have a tiny difference.

This Setup will be divided to x phase and will be done in **Windows Environment**.

### **Burp Suite**
1. download [Burp Suite Community Edition](https://portswigger.net/burp/communitydownload)
2. Setup the Burp suite to your liking.

### **Getting Burp Certificate**
1. Go to Proxy and click the Proxy Setting
2. Export the Certificate in DER format
3. Run this command to convert DER to PEM format.
```
openssl x509 -inform DER -in burp.der -out burp.pem
```
4. Then run the following command
```
openssl x509 -inform PEM -subject_hash_old -in burp.pem
``` 
5. After that, copy the hash on the top to rename "**burp.pem**" to "**hash.0**"


### **Creating a New Proxy**  
Make sure you have already run the Android Virtual Devices with the emulator of your choice.

Check if the devices can be reach with adb using  

```
adb devices
```

If the Android Virtual Devices can be reach with adb, it'll return an IP and Android Device name, then we'll proceed.

1. Open the Burp Suite
2. Go to Proxy Tab and select Proxy Setting
3. In the proxy tab, select **new** and add your Devices IP and port (I recommend you use 8080, the default)
4. Save it and close the setting.
5. Restart your android devices by relaunch it or via adb command
```
adb reboot
```
6. Open the Wifi setting and choose **"Advance Setting"**
7. Change the Proxy to **"Manual"** then put the IP and Port you added earlier in Burp Suite to the Android Devices
8. Save it and you good to go!
<br>
<br>

## Frida

:warning: **You need Python 3.7 (minimum)**

### **Instalation**
1. Open cmd and run 
```
C:\> pip3 install frida-tools
```
2. Once it installed, add the installed directory to PATH Variable
3. Confirm the Installation by running 
```
C:\> frida --version
```  
4. If it's installed correctly, it will give you the Frida Version
<br>
<br>

## **MobSF**